services:
  pluie:
    build: .
    container_name: pluie-app
    restart: unless-stopped
    ports:
      - "9999:9999"
    volumes:
      - ./vault:/vault
    environment:
      - HOME_NOTE_SLUG=ACCUEIL
      - SITE_TITLE=Pluie
      - SITE_DESCRIPTION=My personal knowledge base
      - SITE_ICON=https://avatars.githubusercontent.com/u/46993939?v=4
    develop:
      watch:
        - action: rebuild
          path: .
          ignore:
            - tmp/
            - .git/
            - README.md
            - .gitignore
            - .dockerignore
        - action: sync
          path: ./vault
          target: /vault

volumes:
  vault_data:
    driver: local
